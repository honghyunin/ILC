# Socket

`` 네트워크상에서 동작하는 프로그램 간 통신의 종착점(Endpoint)입니다. 즉, 프로그램이 네트워크에서 데이터를 통신할 수 있도록 연결해주는 연결부라고 할 수 있습니다.``

- Endpoint : IP Address 와 port 번호의 조합을 뜻하며 최종 목적지를 나타냅니다. 예시로 최종목적지는 사용자의 디바이스(PC, 스마트폰 등) 또는 Server가 될 수 있습니다.

- 데이터를 통신할 수 있도록 해주는 연결부이기 때문에 통신할 두 프로그램(Cleint, Server) 모두에 소켓이 생성되야 합니다.

- Server는 특정 포트와 연결된 소켓(Server 소켓)을 가지고 컴퓨터 위에서 동작하게 되는데요. 이 Server는 소켓을 통해 Client측 소켓의 연결 요청이 있을 때까지 기다리고 있습니다. (Listening 한다 라고도 표현합니다)

- Client 소켓에서 연결요청을 하면(올바른 port로 들어왔을 때) Server 소켓이 허락을 하여 통신을 할 수 있도록 연결(connection)되는 것입니다.

# WebSocket

> 서버와 클라이언트 간에 Socket Connection을 유지해서 언제든 양방향 통신 또는 데이터 전송이 가능하도록 하는 기술입니다.

# Why use?

- 기존의 웹 어플리케이션들의 서버와 클라이언트 간 통신은 대부분 HTTP를 통해 이루어 졌으며 HTTP는 Request/Response 기반의 *stateless protocol입니다.

> stateless : 요청과 응답을 따로 저장하지 않고 단순 처리만 하는 것을 의미

- 즉 서버와 클라이언트간의 영구적인 연결이 되어있지 않고 클라이언트 쪽에서 Req를 할 때 서버가 res를 하는 방식으로 통신이 진행되는 한방향 통신입니다. 이럴경우 서버쪽 데이터가 업데이트 되더라도 클라이언트 쪽 화면은 Refresh 하지 않는 한 변경된 데이터가 업데이트 되지 않는 문제가 발생합니다.

- Web socket은 *Stateful protocol 이기 때문에 클라이언트와 한 번 연결되면 계속 같은 라인을 사용해서 통신하여 HTTP 사용 시 필요없이 발생되는 HTTP와 TCP 연결 트래픽을 피할 수 있습니다.

> stateful : 요청과 응답을 저장하여 처리하는 것을 의미

# 작동원리

- 서버와 클라이언트 간의 WebSocket 연결은 HTTP 프로토콜을 통해 이루어집니다. 만약 연결이 정상적으로 이루어진다면 서버와 클라이언트 간에 WebSocket 연결은 이루어지고 일정 시간이 지나면 HTTP 연결은 자동으로 끊어집니다.
