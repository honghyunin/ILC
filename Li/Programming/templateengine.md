# 템플릿 엔진

: 지정된 템플릿 양식과 데이터가 합쳐져 HTML 문서를 출력하는 소프트웨어를 이야기합니다. 예를들어 JSP나 Freemarker 또는 React, Vue의 View 파일들이 있습니다. 하지만 둘 다 모두 결과적으로는 지정된 템플릿 데이터를 이용해 HTML을 생성하는 템플릿 엔진이지만 전자는 서버 템플릿 엔진, 후자는 클라이언트 템플릿 엔진이라 불립니다.

## 자바스크립트에서 JSP나 Freemarker처럼 자바 코드를 사용할 순 없나요?

이 질문은 커뮤니티에서도 자주 올라오는 질문입니다. 다음의 코드를 보고 한 번 같이 생각해봅시다.

```jsx
<script type="text/javascript">
$(document).ready(function(){
		if(a=="1"){
		<%
				System.out.println("test");
		%>
		}
}); 
```

이 코드는 **if문과 관계없이 무조건 test를 콘솔에 출력**합니다. 이유는 프론트엔드의 자바스크립트가 작동하는 영역과 JSP가 작동하는 영역이 다르기 때문인데 JSP를 비롯한 서버 템플릿 엔진은 **서버에서 구동**됩니다.

 

- JSP가 명확하게 서버 템플릿 엔진은 아니지만 View의 역할만 구성하도록 할 때에는 템플릿 엔진으로써 사용할 수 있습니다.

서버 템플릿 엔진을 이용한 화면 생성은 **서버에서 Java 코드로 문자열**을 만든 뒤 이 문자열을 HTML로 변환하여 **브라우저로 전달**합니다. 

앞선 코드는 HTML을 만드는 과정에서 ``System.out.println("test");`` 를 실행할 뿐이며, 이때 자바스크립트 코드는 **단순한 문자열일 뿐입니다.**

반면에 자바스크립트는 **브라우저 위에서 작동**합니다. 앞에서 작성된 자바스크립트 코드가 실행되는 장소는 서버가 아닌 **브라우저**입니다. 즉, 브라우저에서 작동될 때는 서버 템플릿 엔진의 손을 벗어나 제어할 수가 없습니다.

  흔히 이야기하는 Vue.js나 React.js를 이용한 SPA(SinglePageApplication)는 **브라우저에서 화면을 생성**합니다. 즉, **서버에서 이미 코드가 벗어난 경우**입니다. 그래서 다음과 같이 서버에서는 Json 혹은 Xml 형식의 데이터만 전달하고 클라이언트에서 조립합니다.

- 물론 최근엔 리액트나 뷰와 같은 자바스크립트 프레임워크에서 서버 사이드 렌더링(Server Side Rendering)을 지원하는 모습을 볼 수 있습니다. 이걸 간단히 설명하자면, 자바스크립트 프레임워크의 화면 생성 방식을 서버에서 실행하는 것을 이야기합니다. 이는 V8 엔진 라이브러리들이 지원하기 때문이며, 스프링 부트에서 사용할 수 있는 대표적인 기술들로는 Nashorn, J2V8이 있습니다.
- 다만 스프링 부트를 사용하면서 자바스크립트를 서버사이드에서 렌더링하도록 구현하는 것은 많은 수고가 필요하므로 시작하는 단계에서 추천하지는 않습니다. 스프링 부트에 대한 이해도와 자바스크립트 프레임워크 양쪽에 대한 이해도가 높아졌을 때 시도해 보면 좋습니다.